(function(g,f){function m(a){a=a||{};if(!(this instanceof m))return new m(a);this.defaults={container:"",interval:5E3,duration:600,autoplay:!0,current:0,width:"",height:"",direction:"RTL",dots:!0,buttons:!0,zIndex:1};this.options=f.extend(!0,{},this.defaults,a);this.init()}m.prototype={init:function(){var a=this.options,c=f(a.container);c.length&&(this.$slider=c.find(".sd-slider"),this.$items=this.$slider.find(".sd-slider-item"),a.dots=a.dots&&1<this.$items.length,a.buttons=a.buttons&&1<this.$items.length,this.initLayout(),(a.dots||a.buttons)&&this.bindEvents().setInterval())},initLayout:function(){var a=this.options,c=f(a.container),b;b=a._width=a.width||c.width()||f(g).width();c=a._height=a.height||c.height()||f(g).height();this.$slider.css({width:b,height:c});a.dots&&this.initDots();a.buttons&&this.initButtons();this.select(a.current,!0);return this},initDots:function(){var a=this.options,c=[],b;b=this.$dots=f('<div class="sd-slider-dots"></div>');this.$items.each(function(){c.push('<div class="sd-slider-dots-item" data-action="dot" uigs="lunbo_dot"></div>')});b.css({zIndex:a.zIndex+2}).html(c.join("\n"));this.$slider.append(b);this.selectDots();return this},initButtons:function(){var a=this,c=a.options.zIndex+2;f.each(["prev","next"],function(b,d){d=a["$"+d]=f('<a href="javascript:void(0)" class="sd-slider-btn-'+d+'" data-action="'+d+'" uigs="lunbo_'+d+'"></a>').css("z-index",c);a.$slider.append(d)});return a},bindEvents:function(){var a=this,c=a.options,b=a.$slider,d={prev:function(b,c){a.animate("prev"==c?"LTR":"RTL")},next:function(b,c){a.animate("prev"==c?"LTR":"RTL")},dot:function(b){b=f(this);var c=b.index();b.hasClass("current")||a.select(c)}};a.__count=0;b.on("click","[data-action]",function(b){var e=f(this).attr("data-action"),h=(new Date).getTime();h-a.__count>c.duration+100&&(a.__count=h,d[e]&&d[e].call(this,b,e))});b.on("mouseenter",function(){f(this).addClass("sd-slider-hover");c.autoplay&&(clearInterval(a.__timeout),delete a.__timeout)}).on("mouseleave",function(){f(this).removeClass("sd-slider-hover");c.autoplay&&a.setInterval()});return a},selectDots:function(){this.$dots.find(".sd-slider-dots-item").eq(this.options.current||0).addClass("current").siblings().removeClass("current");return this},rearrange:function(a){var c=this.$items,b=this.options;a=a||b.direction;var d="RTL"===a,f=b.zIndex+1,e=b._width;b.current=d?b.next:b.prev;this.updateIndex(a);c.eq(d?b.prev:b.next).css({left:d?0-e:e,zIndex:f});c.eq(d?b.next:b.prev).css({left:d?e:0-e,zIndex:f});b.dots&&this.selectDots();return this},animate:function(a){var c=this,b=c.options,d=c.$items,k=b.current,e=b._width,h=b.duration,n="RTL"===a,l;2===d.length?(l=0===k?1:0,d.eq(l).css({left:n?e:0-e}).animate({left:0},h),d.eq(k).animate({left:n?0-e:e},h),b[n?"next":"prev"]=b.current=l,c.selectDots()):(f.each([{index:b.current,offset:{RTL:0-e,LTR:e}},{index:b.prev,offset:{RTL:0-e,LTR:0}},{index:b.next,offset:{RTL:0,LTR:e}}],function(c,e){d.eq(e.index).animate({left:e.offset[a]},b.duration)}),c.__timeout__&&(g.clearTimeout(c.__timeout__),delete c.__timeout__),c.__timeout__=g.setTimeout(function(){c.rearrange(a)},b.duration));return c},updateIndex:function(a){a=this.options;var c=this.$items.length-1,b=a.current;0==b?(a.prev=c,a.next=b+1):b==c?(a.prev=b-1,a.next=0):(a.prev=b-1,a.next=b+1);return this},select:function(a,c){var b=this.options,d=this.$items,k=b._width,e=b._height;a=a||0;var h="RTL"==b.direction,g=b.current,l=function(){d.each(function(a,c){var d=f(this),h=(b.zIndex||1)+1,g;a==b.current?g=0:a==b.prev?g=0-k:a==b.next?g=k:(g=0,--h);d.css({width:k,height:e,zIndex:h,left:g})})};b.current=a;this.updateIndex();b.dots&&this.selectDots();c?l():(d.eq(g).animate({left:h?0-k:k},b.duration),d.eq(a).css({left:h?k:0-k,index:b.zIndex+1}).animate({left:0},b.duration,function(){l()}))},setInterval:function(){var a=this,c=a.options;c.autoplay&&(a.__timeout=setInterval(function(){a.animate(c.direction)},c.interval))}};g.Slider=m})(window,jQuery);