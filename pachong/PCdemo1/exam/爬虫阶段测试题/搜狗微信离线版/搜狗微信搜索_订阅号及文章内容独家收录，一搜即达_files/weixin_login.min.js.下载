function strcat(o,n){var t=0,e=o.length;if(e<=n)return o;for(var i=0;i<e;i++)if(o.charCodeAt(i)>256?t+=1:t+=.5,Math.floor(t)>=n&&i!==e-1)return o.substring(0,Math.floor(t))+"...";return o}function loginCallback(o){if(o&&0==o.status){window.passportUserId||(window.passportUserId=o.puid);var n=$("#login_yes").find(".yh");o.username&&""!==o.username?(n.attr("title",o.username),n.append(strcat(decodeURIComponent(o.username),8))):o.puid&&(n.attr("title",o.puid),n.append(strcat(o.puid))),"https:"===location.protocol.toLowerCase()&&null!==o.headurl&&0===o.headurl.indexOf("http:")&&(o.headurl="//img0"+(Math.floor(4*Math.random())+1)+".sogoucdn.com/net/a/04/link?appid=100520033&url="+encodeURIComponent(o.headurl)),n.find("img").attr("src",o.headurl),$("#login_yes").show(),buildBottomBar()}}function login(o){if($(o.loginBtn)){var n=o.loginBtn,t=$(o.parent)||$("body"),e=o.cbLink||"https://www.sogou.com/login/qq_login_callback_page.html",i=o.cbFn;$(n)[0]&&($(n)[0].onclick=function(o){return createLoginBox(t,e),i&&i(),!1})}}var getstop=function(){return document.body&&document.body.scrollTop||document.documentElement&&document.documentElement.scrollTop||0};function createLoginBox(o,n){var t=["https://account.sogou.com/connect/login?provider=weixin","client_id=2017","ru="+encodeURIComponent(location.protocol.toLowerCase()+"//"+location.host),"third_appid=wx6634d697e8cc0a29","href="+encodeURIComponent("https://dlweb.sogoucdn.com/weixin/css/weixin_join.min.css?v=20170315")].join("&"),e=$("<div/>").addClass("login-skin"),i=$("<div/>").addClass("login-pop-wx"),a=$("<iframe/>").attr("src",t).css({width:510,height:500,border:0}).attr("frameborder","no").attr("border","0"),r=$("<a/>").attr({"id":"loginCloseBtn","href":"javascript:void(0)","class":"del","uigs":"loginCloseBtn"});i.append(r),i.append(a),o.append(e),o.append(i);var s=getstop()+150;if(i.css("top",s+"px"),e.height($(document.body).height()),window.isIE6){var d=$("body").width();d>=1e3?e.width(d):e.width(1e3)}window.mask=!0,r.bind("click.closebox",function(){e.remove(),i.remove(),window.mask=!1})}$("#quit").click(function(o){PassportSC.logoutHandle($("#pp-playground")[0],function(){},function(){window.location.reload()});var n=o||window.event;return n.preventDefault&&n.preventDefault(),n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0,!1});var passportnum=0;!function(){var o=arguments.callee;passportnum++,setTimeout(function(){if(window.PassportSC){if(PassportSC=PassportSC||{},window.WEIXIN={},WEIXIN.logout=function(o){return PassportSC.logoutHandle($("#pp-playground")[0],function(){},function(){window.location.reload()}),event.preventDefault&&event.preventDefault(),event.returnValue=!1,!1},PassportSC.appid=2017,PassportSC.parsePassportCookie(),PassportSC.cookie&&PassportSC.cookie.userid&&PassportSC.cookie.userid.indexOf("weixin.sohu.com")>0){window.hasLogin="2",window.passportUserId=PassportSC.cookie.userid,ajajNode(loginCallbacklink);var n=$(".yh");toggleBox(n,$("#login_menu"),{enter:function(){n.addClass("cur")},leave:function(){n.removeClass("cur")}})}else window.hasLogin="1",isIE6||$("#login_no").show();uigs_para.login=window.passportUserId?"1":"0",window.onloadTime=(new Date).getTime(),uigs_pv()}else{if(passportnum>=10)return window.hasLogin="1",void(isIE6||$("#login_no").show());o.apply()}},100)}();